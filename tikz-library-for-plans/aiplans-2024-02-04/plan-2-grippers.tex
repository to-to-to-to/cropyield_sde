
%   Note that when specifying math code ($...$) in the preconditions and effects, you need to
%   put it in an *additional* set of parentheses (in addition to the ones already there). Example:
%   pres = { {A} , {B} , {C} }, BUT:
%   pres = { {A{$_1$}} , {B{$_2$}} , {C{$_1$}} }, or simply
%   pres = { {{A$_1$}} , {{B$_2$}} , {{C$_1$}} }.
%   Otherwise, you will get strange compilation errors...


% some plan for the Blocksworld domain with two grippers.
\begin{tikzpicture}
  \action{init}{init, body={draw=black, fill=black}}
  \action{unstackAC}{unstack = {G2}{A}{C}, body = {rounded corners, draw=black, fill=CornflowerBlue, right = 14 em of init, yshift=4em}}
  \action{putdownA}{putdown  = {G2}{A},    body = {rounded corners, draw=black, fill=CornflowerBlue, right = 13 em of unstackAC}}
  \action{pickupD}{pickup    = {G1}{D},    body = {rounded corners, draw=black, fill=CornflowerBlue, below = 3 em of putdownA}}
  \action{stackDC}{stack     = {G1}{D}{C}, body = {rounded corners, draw=black, fill=CornflowerBlue, right = 13 em of pickupD}}
  \action{pickupA}{pickup    = {G2}{A},    body = {rounded corners, draw=black, fill=CornflowerBlue, right = 13 em of putdownA}}
  \action{stackAB}{stack     = {G2}{A}{B}, body = {rounded corners, draw=black, fill=CornflowerBlue, right = 13 em of pickupA}}
  \action{goal}{goal,                      body = {draw=black, fill=black,right = 90 em of init}}

  % to unstack(A,C)
  \link{init/eff/2}{unstackAC/pre/1}{edge[bend left,->]}
  \link{init/eff/6}{unstackAC/pre/2}{edge[bend left,->]}
  \link{init/eff/9}{unstackAC/pre/3}{edge[bend left,->]}

  % to pickup(D)
  \link{init/eff/1}{pickupD/pre/1}{edge[bend right,->]}
  \link{init/eff/5}{pickupD/pre/2}{edge[bend right=20,->]}
  \link{init/eff/8}{pickupD/pre/3}{edge[bend right=10,->]}

  % to putdown(A)
  \link{unstackAC/eff/2}{putdownA/pre/1}{edge[bend left,->]}
  
  % to stack(D,C)
  \link{pickupD/eff/2}{stackDC/pre/1}{edge[bend left,->]}
  \link{unstackAC/eff/5}{stackDC/pre/2}{edge[bend left=30,->]}
  
  % to pickup(A)
  \link{putdownA/eff/1}{pickupA/pre/1}{edge[bend right,->]}
  \link{putdownA/eff/3}{pickupA/pre/2}{edge[bend right=20,->]}
  \link{putdownA/eff/4}{pickupA/pre/3}{edge[bend right=20,->]}

  % to stack(A,B)
  \link{pickupA/eff/2}{stackAB/pre/1}{edge[bend left,->]}
  \link{init/eff/7}{stackAB/pre/2}{edge[bend right=3,->]}
  
  % to goal
  \link{stackAB/eff/3}{goal/pre/1}{edge[bend left,->]}
  \link{stackDC/eff/3}{goal/pre/2}{edge[bend right=10,->]}
\end{tikzpicture}