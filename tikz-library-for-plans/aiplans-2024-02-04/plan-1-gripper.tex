
%   Note that when specifying math code ($...$) in the preconditions and effects, you need to
%   put it in an *additional* set of parentheses (in addition to the ones already there). Example:
%   pres = { {A} , {B} , {C} }, BUT:
%   pres = { {A{$_1$}} , {B{$_2$}} , {C{$_1$}} }, or simply
%   pres = { {{A$_1$}} , {{B$_2$}} , {{C$_1$}} }.
%   Otherwise, you will get strange compilation errors...


\newcommand{\Distance} {11.25em}

% some plan for the Blocksworld domain with two grippers.
\begin{tikzpicture}
  \action{init}{init,                  body = {draw=black, fill=black}}
  \action{unstackAC}{unstack = {A}{C}, body = {rounded corners, draw=black, fill=CornflowerBlue, right = 12em of init}}
  \action{putdownA} {putdown = {A},    body = {rounded corners, draw=black, fill=CornflowerBlue, right = \Distance of unstackAC}}
  \action{pickupA}  {pickup  = {A},    body = {rounded corners, draw=black, fill=CornflowerBlue, right = \Distance of putdownA}}
  \action{stackAB}  {stack   = {A}{B}, body = {rounded corners, draw=black, fill=CornflowerBlue, right = \Distance of pickupA}}
  \action{pickupD}  {pickup  = {D},    body = {rounded corners, draw=black, fill=CornflowerBlue, right = \Distance of stackAB}}
  \action{stackDC}  {stack   = {D}{C}, body = {rounded corners, draw=black, fill=CornflowerBlue, right = \Distance of pickupD}}
  \action{goal}     {goal,             body = {draw=black, fill=black,                 right = \Distance of stackDC}}
  
  \node[fit=(putdownA) (pickupA), draw=red, very thick, inner ysep=5pt, inner xsep=50pt, label={[anchor=south west, xshift=55pt, text=red]above right:removable actions}] {};
  
  % to unstack(A,C)
  \link{init/eff/1}{unstackAC/pre/1}{edge[bend left,->]}
  \link{init/eff/5}{unstackAC/pre/2}{edge[bend left,->]}
  \link{init/eff/8}{unstackAC/pre/3}{edge[bend left,->]}
  
  % to putdown(A)
  \link{unstackAC/eff/2}{putdownA/pre/1}{edge[bend left,->]}
  
  % to pickup(A)
  \link{putdownA/eff/1}{pickupA/pre/1}{edge[bend left,->]}
  \link{putdownA/eff/3}{pickupA/pre/2}{edge[bend right=20,->]}
  \link{putdownA/eff/4}{pickupA/pre/3}{edge[bend right=20,->]}

  % to stack(A,B)
  \link{pickupA/eff/2}{stackAB/pre/1}{edge[bend left,->]}
  \link{init/eff/6}{stackAB/pre/2}{edge[bend right=7.5,->]}
  
  % to pickup(D)
  \link{stackAB/eff/1}{pickupD/pre/1}{edge[bend left,->]}
  \link{init/eff/4}{pickupD/pre/2}{edge[bend left=15,->]}
  \link{init/eff/7}{pickupD/pre/3}{edge[bend right=10,->]}
  
  % to stack(D,C)
  \link{pickupD/eff/2}{stackDC/pre/1}{edge[bend left,->]}
  \link{unstackAC/eff/5}{stackDC/pre/2}{edge[bend right=10,->]}
  
  % to goal
  \link{stackAB/eff/3}{goal/pre/1}{edge[bend left=15,->]}
  \link{stackDC/eff/3}{goal/pre/2}{edge[bend left,->]}
\end{tikzpicture}